<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project members</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="http://localhost:8080/addProjectMember.html">Add new members</a>
<br>
<a href="http://localhost:8080/deleteMember.html">Delete member</a>
<br>
<a href="http://localhost:8080/addProjectTask.html">Add new tasks</a>
<br>
<a href="http://localhost:8080/alterProjectTask.html">Change task status</a>
<br>
<a href="http://localhost:8080/deleteTask.html">Delete Task</a>
<br>
<a href="http://localhost:8080/addMemberToTask.html">Add member to task</a>
<br>
<a href="http://localhost:8080/addDepartment.html">Add departments</a>
<br>
<a href="http://localhost:8080/deleteDepartment.html">Delete departments</a>
<br><br>

<h1>Project members:</h1>
<div id="members"></div>
<br><br>
<form action="/api/filterTask" method="POST" name="statusForm">
    <Label for="status-select">Filter on task status: </Label>
    <select id="status-select" name="taskStatus" onchange="this.form.submit()">
        <option onclick="showFilteredTasks()" value='*'>Show all</option>
        <option value="OPEN">Open</option>
        <option value="IN_PROGRESS">In progress</option>
        <option value="FINISHED">Finished</option>
        <option value="CANCELED">Canceled</option>
    </select>
    <br>
    <Label for="member-select">Filter on member: </Label>
    <select id="member-select" name="taskMember" onchange="this.form.submit()">
        <option value="*">Show all</option>
    </select>
</form>
<br>
<button onclick="showFilteredTasks()">Filter</button>
<button onclick="deleteFinishedTasks()"> Delete finished tasks </button>


<h1>Tasks:</h1>
<div id="tasks"></div>

</body>
<script>
    fetch("/api/member").then(response => response.text()).then(html => {
        document.getElementById("members").innerHTML = html;
    });

    fetch("/api/task").then(response => response.text()).then(html => {
        document.getElementById("tasks").innerHTML = html;
    });

    fetch("/api/memberSelect").then(response => response.text()).then(html => {
        document.getElementById("member-select").innerHTML += html;
    });

    function showFilteredTasks() {
        fetch("/api/showFilterTask").then(response => response.text()).then(html => {
            document.getElementById("tasks").innerHTML = html;
        });
    }

    function deleteFinishedTasks(){
        fetch("/api/deleteFinishedTasks").then(response => response.text()).then(html => {
            document.getElementById("status-select").innerHTML = html;
        });
    }

</script>
</html>